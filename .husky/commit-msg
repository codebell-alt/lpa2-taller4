#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

if ! echo "$COMMIT_MSG" | grep -qE "^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,}$"; then
  echo "Error: El mensaje de commit no sigue el formato Conventional Commits"
  echo "Formato esperado: tipo(scope): descripción"
  echo "Tipos válidos: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert"
  echo "Ejemplo: feat: agregar módulo de usuarios"
  exit 1
fi
